<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solitaire Game</title>
    <style>
        body {
            background: #2e7d32;
            font-family: Arial, sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        #game-container {
            display: grid;
            grid-template-columns: repeat(7, 100px) 20px repeat(4, 100px);
            grid-template-rows: 150px 20px 500px;
            gap: 10px;
        }
        .pile {
            width: 100px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed #fff;
            border-radius: 5px;
            position: relative;
        }
        .stock, .waste {
            grid-row: 1;
        }
        .stock { grid-column: 1; }
        .waste { grid-column: 2; }
        .foundation {
            grid-row: 1;
        }
        .foundation-1 { grid-column: 9; }
        .foundation-2 { grid-column: 10; }
        .foundation-3 { grid-column: 11; }
        .foundation-4 { grid-column: 12; }
        .tableau {
            grid-row: 3;
        }
        .tableau-1 { grid-column: 1; }
        .tableau-2 { grid-column: 2; }
        .tableau-3 { grid-column: 3; }
        .tableau-4 { grid-column: 4; }
        .tableau-5 { grid-column: 5; }
        .tableau-6 { grid-column: 6; }
        .tableau-7 { grid-column: 7; }
        .card {
            width: 90px;
            height: 130px;
            background: white;
            border: 1px solid #000;
            border-radius: 5px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: grab;
            user-select: none;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }
        .card.dragging {
            opacity: 0.7;
            cursor: grabbing;
        }
        .card.red { color: red; }
        .card.black { color: black; }
        .card.face-down { background: #1565c0; color: transparent; }
        #deal-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background: #fff;
            border: 1px solid #000;
            border-radius: 5px;
        }
        #deal-button:hover {
            background: #ddd;
        }
        #message {
            margin-top: 10px;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="pile stock" id="stock"></div>
        <div class="pile waste" id="waste"></div>
        <div class="pile foundation foundation-1" id="foundation-1"></div>
        <div class="pile foundation foundation-2" id="foundation-2"></div>
        <div class="pile foundation foundation-3" id="foundation-3"></div>
        <div class="pile foundation foundation-4" id="foundation-4"></div>
        <div class="pile tableau tableau-1" id="tableau-1"></div>
        <div class="pile tableau tableau-2" id="tableau-2"></div>
        <div class="pile tableau tableau-3" id="tableau-3"></div>
        <div class="pile tableau tableau-4" id="tableau-4"></div>
        <div class="pile tableau tableau-5" id="tableau-5"></div>
        <div class="pile tableau tableau-6" id="tableau-6"></ mức

System: <xaiArtifact artifact_id="4a60645a-6bb0-443e-9d9a-3a9125cbeb50" artifact_version_id="c206e060-6d57-4678-9588-d4262f4b6cd2" title="solitaire.html" contentType="text/html">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solitaire Game</title>
    <style>
        body {
            background: #2e7d32;
            font-family: Arial, sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }
        #game-container {
            display: grid;
            grid-template-columns: repeat(7, 100px) 20px repeat(4, 100px);
            grid-template-rows: 150px 20px 500px;
            gap: 10px;
        }
        .pile {
            width: 100px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed #fff;
            border-radius: 5px;
            position: relative;
        }
        .stock, .waste {
            grid-row: 1;
        }
        .stock { grid-column: 1; }
        .waste { grid-column: 2; }
        .foundation {
            grid-row: 1;
        }
        .foundation-1 { grid-column: 9; }
        .foundation-2 { grid-column: 10; }
        .foundation-3 { grid-column: 11; }
        .foundation-4 { grid-column: 12; }
        .tableau {
            grid-row: 3;
        }
        .tableau-1 { grid-column: 1; }
        .tableau-2 { grid-column: 2; }
        .tableau-3 { grid-column: 3; }
        .tableau-4 { grid-column: 4; }
        .tableau-5 { grid-column: 5; }
        .tableau-6 { grid-column: 6; }
        .tableau-7 { grid-column: 7; }
        .card {
            width: 90px;
            height: 130px;
            background: white;
            border: 1px solid #000;
            border-radius: 5px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: grab;
            user-select: none;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }
        .card.dragging {
            opacity: 0.7;
            cursor: grabbing;
        }
        .card.red { color: red; }
        .card.black { color: black; }
        .card.face-down { background: #1565c0; color: transparent; }
        #deal-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background: #fff;
            border: 1px solid #000;
            border-radius: 5px;
        }
        #deal-button:hover {
            background: #ddd;
        }
        #message {
            margin-top: 10px;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="pile stock" id="stock"></div>
        <div class="pile waste" id="waste"></div>
        <div class="pile foundation foundation-1" id="foundation-1"></div>
        <div class="pile foundation foundation-2" id="foundation-2"></div>
        <div class="pile foundation foundation-3" id="foundation-3"></div>
        <div class="pile foundation foundation-4" id="foundation-4"></div>
        <div class="pile tableau tableau-1" id="tableau-1"></div>
        <div class="pile tableau tableau-2" id="tableau-2"></div>
        <div class="pile tableau tableau-3" id="tableau-3"></div>
        <div class="pile tableau tableau-4" id="tableau-4"></div>
        <div class="pile tableau tableau-5" id="tableau-5"></div>
        <div class="pile tableau tableau-6" id="tableau-6"></div>
        <div class="pile tableau tableau-7" id="tableau-7"></div>
    </div>
    <button id="deal-button">New Game</button>
    <div id="message"></div>
    <script>
        const suits = ['♥', '♦', '♣', '♠'];
        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const colors = { '♥': 'red', '♦': 'red', '♣': 'black', '♠': 'black' };
        let stock = [], waste = [], foundations = [[], [], [], []], tableaus = [[], [], [], [], [], [], []];
        let draggingCard = null, draggingSource = null, offsetX, offsetY;

        function createDeck() {
            const deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ suit, rank });
                }
            }
            return deck;
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function dealGame() {
            const deck = createDeck();
            shuffle(deck);
            stock = deck.slice();
            waste = [];
            foundations = [[], [], [], [], []];
            tableaus = [[], [], [], [], [], [], []];
            document.getElementById('message').textContent = '';
            clearPiles();

            for (let i = 0; i < 7; i++) {
                for (let j = i; j < 7; j++) {
                    const card = stock.pop();
                    card.faceUp = j === i;
                    tableaus[j].push(card);
                }
            }
            renderGame();
        }

        function clearPiles() {
            document.querySelectorAll('.pile').forEach(pile => pile.innerHTML = '');
        }

        function createCardElement(card, index, pileType) {
            const cardElement = document.createElement('div');
            cardElement.classList.add('card');
            cardElement.dataset.suit = card.suit;
            cardElement.dataset.rank = card.rank;
            cardElement.dataset.index = index;
            cardElement.dataset.pile = pileType;
            cardElement.textContent = `${card.rank}${card.suit}`;
            cardElement.classList.add(colors[card.suit]);
            if (!card.faceUp) cardElement.classList.add('face-down');
            cardElement.style.top = `${index * 30}px`;
            cardElement.draggable = card.faceUp;
            cardElement.addEventListener('dragstart', dragStart);
            cardElement.addEventListener('dragend', dragEnd);
            return cardElement;
        }

        function renderGame() {
            clearPiles();
            stock.forEach((card, index) => {
                document.getElementById('stock').appendChild(createCardElement(card, index, 'stock'));
            });
            waste.forEach((card, index) => {
                document.getElementById('waste').appendChild(createCardElement(card, index, 'waste'));
            });
            foundations.forEach((pile, i) => {
                pile.forEach((card, index) => {
                    document.getElementById(`foundation-${i + 1}`).appendChild(createCardElement(card, index, `foundation-${i + 1}`));
                });
            });
            tableaus.forEach((pile, i) => {
                pile.forEach((card, index) => {
                    document.getElementById(`tableau-${i + 1}`).appendChild(createCardElement(card, index, `tableau-${i + 1}`));
                });
            });
            checkWin();
        }

        function dragStart(e) {
            if (!e.target.classList.contains('face-down')) {
                draggingCard = e.target;
                draggingSource = e.target.parentElement;
                const rect = e.target.getBoundingClientRect();
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                e.target.classList.add('dragging');
                setTimeout(() => {
                    e.target.style.position = 'fixed';
                    e.target.style.zIndex = '1000';
                }, 0);
            } else {
                e.preventDefault();
            }
        }

        function dragEnd(e) {
            if (draggingCard) {
                draggingCard.classList.remove('dragging');
                draggingCard.style.position = 'absolute';
                draggingCard.style.zIndex = '';
                const dropTarget = findDropTarget(e.clientX, e.clientY);
                if (dropTarget && canDrop(draggingCard, dropTarget)) {
                    moveCard(draggingCard, draggingSource, dropTarget);
                }
                draggingCard.style.left = '';
                draggingCard.style.top = '';
                draggingCard = null;
                draggingSource = null;
                renderGame();
            }
        }

        function findDropTarget(x, y) {
            const piles = document.querySelectorAll('.pile');
            for (let pile of piles) {
                const rect = pile.getBoundingClientRect();
                if (x > rect.left && x < rect.right && y > rect.top && y < rect.bottom) {
                    return pile;
                }
            }
            return null;
        }

        function canDrop(cardElement, target) {
            const card = {
                suit: cardElement.dataset.suit,
                rank: cardElement.dataset.rank,
                index: parseInt(cardElement.dataset.index)
            };
            const sourcePile = cardElement.dataset.pile;
            const targetId = target.id;

            if (targetId.startsWith('foundation')) {
                const foundationIndex = parseInt(targetId.split('-')[1]) - 1;
                const foundation = foundations[foundationIndex];
                if (foundation.length === 0) {
                    return card.rank === 'A';
                } else {
                    const topCard = foundation[foundation.length - 1];
                    return card.suit === topCard.suit && ranks.indexOf(card.rank) === ranks.indexOf(topCard.rank) + 1;
                }
            } else if (targetId.startsWith('tableau')) {
                const tableauIndex = parseInt(targetId.split('-')[1]) - 1;
                const tableau = tableaus[tableauIndex];
                if (tableau.length === 0) {
                    return card.rank === 'K';
                } else {
                    const topCard = tableau[tableau.length - 1];
                    return colors[card.suit] !== colors[topCard.suit] && ranks.indexOf(card.rank) === ranks.indexOf(topCard.rank) - 1;
                }
            }
            return false;
        }

        function moveCard(cardElement, source, target) {
            const card = {
                suit: cardElement.dataset.suit,
                rank: cardElement.dataset.rank,
                faceUp: !cardElement.classList.contains('face-down')
            };
            const sourceId = source.id;
            const targetId = target.id;
            let sourcePile, targetPile;

            if (sourceId === 'stock') {
                sourcePile = stock;
            } else if (sourceId === 'waste') {
                sourcePile = waste;
            } else if (sourceId.startsWith('foundation')) {
                sourcePile = foundations[parseInt(sourceId.split('-')[1]) - 1];
            } else if (sourceId.startsWith('tableau')) {
                sourcePile = tableaus[parseInt(sourceId.split('-')[1]) - 1];
            }

            if (targetId.startsWith('foundation')) {
                targetPile = foundations[parseInt(targetId.split('-')[1]) - 1];
            } else if (targetId.startsWith('tableau')) {
                targetPile = tableaus[parseInt(targetId.split('-')[1]) - 1];
            }

            const cardIndex = parseInt(cardElement.dataset.index);
            const cardsToMove = sourcePile.slice(cardIndex);
            sourcePile.splice(cardIndex, sourcePile.length - cardIndex);
            cardsToMove.forEach(c => {
                c.faceUp = true;
                targetPile.push(c);
            });

            if (sourceId.startsWith('tableau') && sourcePile.length > 0) {
                sourcePile[sourcePile.length - 1].faceUp = true;
            }

            if (sourceId === 'stock') {
                waste.push(stock.pop());
                waste[waste.length - 1].faceUp = true;
            }
        }

        function checkWin() {
            if (foundations.every(pile => pile.length === 13)) {
                document.getElementById('message').textContent = 'You Win!';
            }
        }

        document.getElementById('stock').addEventListener('click', () => {
            if (stock.length === 0) {
                stock = waste.reverse();
                stock.forEach(card => card.faceUp = false);
                waste = [];
            } else {
                waste.push(stock.pop());
                waste[waste.length - 1].faceUp = true;
            }
            renderGame();
        });

        document.getElementById('deal-button').addEventListener('click', dealGame);

        document.querySelectorAll('.pile').forEach(pile => {
            pile.addEventListener('dragover', e => e.preventDefault());
            pile.addEventListener('drop', e => {
                if (draggingCard && canDrop(draggingCard, pile)) {
                    moveCard(draggingCard, draggingSource, pile);
                    renderGame();
                }
            });
        });

        dealGame();
    </script>
</body>
</html>